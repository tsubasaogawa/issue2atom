on:
  # schedule:
  #  - cron: "15 0 * * *"
  workflow_dispatch:

jobs:
  issue2atom:
    runs-on: ubuntu-latest
    name: Sample job using issue2atom
    steps:
      - name: Checkout
        uses: actions/checkout@v2

      - name: Set up docker buildx
        uses: docker/setup-buildx-action@v1

      - name: issue2atom octocat/hello-world
        id: issue2atom_octocat/hello-world
        uses: tsubasaogawa/issue2atom@v2
        with:
          user: "octocat"
          repo: "hello-world"
          max_issue_num: 10

      # you can add multiple definitions
      # - name: issue2atom octocat/hello-world
      #   id: issue2atom_tsubasaogawa/issue2atom
      #   uses: tsubasaogawa/issue2atom@v2
      #   with:
      #     user: "tsubasaogawa"
      #     repo: "issue2atom"
      #     max_issue_num: 10

      - name: Push generated atom file
        uses: stefanzweifel/git-auto-commit-action@v4
        with:
          commit_message: Generated by issue2atom
          branch: gh-pages
          file_pattern: "**/atom.xml"
          create_branch: true
          push_options: "--force"
